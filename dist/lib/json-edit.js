"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.JsonEdit=t()}(window,function(){function e(e){switch(l.call(e).toLowerCase()){case"[object object]":return"object";case"[object array]":return"array";case"[object null]":return"null";case"[object string]":return"string";case"[object number]":return"number";case"[object boolean]":return e?"true":"false"}return""}function t(e,t,n,r){var i={type:e,id:a++};return"#"==n?(i.isRoot="the-root",i.key="root",i.keyDis="disabled"):n&&(i.key=n),i[e+"Type"]="selected",i.child=r,["number","string"].indexOf(e)>=0&&(i.value=t),"object"==e&&(i.isKey="the-key"),c.replace(/\{\#(\w+)\}/g,function(e,t){var n=i[t];return void 0===n?"":n})}function n(r,i){var o=e(r);if(""==o)return"";if("object"==o){var l=[];for(var a in r)l.push(n(r[a],a));return t(o,r,i,l.join(""))}if("array"==o){for(var c=[],u=0;u<r.length;u+=1)c.push(n(r[u]));return t(o,r,i,c.join(""))}return t(o,r,i,"")}function r(e,t){return u.innerHTML=n(e,t),u.firstChild}function i(e){for(var t="lje"+e.getAttribute("key"),n=e.querySelectorAll("["+t+"]"),r={$:e},i=0;i<n.length;i+=1){var o=n[i],l=o.getAttribute(t);l&&(r[l]=o)}return r}function o(e){var t=i(e),n=t.sel.value;if("object"==n){var r={};return t.child.childNodes.forEach(function(e){if(1==e.nodeType){var t=o(e),n=_slicedToArray(t,2),i=n[0],l=n[1];l&&(r[l]=i)}}),[r,t.key.value.trim()]}if("array"==n){var l=[];return t.child.childNodes.forEach(function(e){if(1==e.nodeType){var t=o(e),n=_slicedToArray(t,1),r=n[0];l.push(r)}}),[l,t.key.value.trim()]}return"null"==n?[null,t.key.value.trim()]:"false"==n?[!1,t.key.value.trim()]:"true"==n?[!0,t.key.value.trim()]:"string"==n?[t.val.value.trim(),t.key.value.trim()]:"number"==n?[Number(t.val.value.replace(/\W+/g,""))||0,t.key.value.trim()]:[void 0,""]}var l=Object.prototype.toString,a=10,c='<div class="lje-line {#isRoot}" key="{#id}">\n                        <div class="lje-cols type-{#type}" lje{#id}="cols">\n                            <div class="lje-col key">\n                                <div class="lje-ipt">\n                                    <input type="text" lje{#id}="key" {#keyDis} value="{#key}" />\n                                </div>\n                            </div>\n                            <div class="lje-col icon is">\n                                <div class="lje-is">:</div>\n                            </div>\n                            <div class="lje-col select">\n                                <div class="lje-select">\n                                    <span class="select-c">\n                                        <select lje{#id}="sel">\n                                            <option value="string" {#stringType}>string</option>\n                                            <option value="number" {#numberType}>number</option>\n                                            <option value="object" {#objectType}>object</option>\n                                            <option value="array" {#arrayType}>array</option>\n                                            <option value="null" {#nullType}>null</option>\n                                            <option value="true" {#trueType}>true</option>\n                                            <option value="false" {#falseType}>false</option>\n                                        </select>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class="lje-col full">\n                                <div class="lje-ipt">\n                                    <input type="text" lje{#id}="val" value="{#value}" />\n                                </div>\n                            </div>\n                            <div class="lje-col icon add">\n                                <div class="lje-add" lje-click="add"></div>\n                            </div>\n                            <div class="lje-col icon remove">\n                                <div class="lje-remove" lje-click="remove"></div>\n                            </div>\n                        </div>\n                        <div class="lje-child {#isKey}" lje{#id}="child">{#child}</div>\n                    </div>'.replace(/>\s+</g,"><"),u=document.createElement("div"),s={change:function(e,t){var n=i(e);if(n.cols.className="lje-cols type-"+t,n.child.className="lje-child"+("object"==t?" the-key":""),"number"==t)return void(n.val.value=n.val.value.replace(/\D/g,"")||0);["object","array"].indexOf(t)<0&&(n.child.innerHTML="")},add:function(e){var t=i(e),n=r("");t.child.appendChild(n)},remove:function(e){e.parentNode.removeChild(e)}};return function(){function e(t){_classCallCheck(this,e),this.$="string"==typeof t?document.getElementById(t):t,this.$.onchange=function(e){var t=e.target;if("select"==t.tagName.toLowerCase()){var n=t.value;s.change(t.parentNode.parentNode.parentNode.parentNode.parentNode,n)}},this.$.onclick=function(e){var t=e.target,n=s[t.getAttribute("lje-click")];n&&n(t.parentNode.parentNode.parentNode)}}return _createClass(e,[{key:"renderByData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$.innerHTML='<div class="locus-json-edit">'+n(e,"#")+"</div>",this.key=a-1}},{key:"getData",value:function(){return o(this.$.querySelector('[key="'+this.key+'"]'))[0]}}]),e}()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9qc29uLWVkaXQuanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJfdHlwZW9mIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiZ2V0VmFsdWVUeXBlIiwidmFsdWUiLCJjYWxsIiwidG9Mb3dlckNhc2UiLCJKc29uRWRpdCIsInRvU3RyaW5nIiwiT2JqZWN0IiwidHlwZSIsImdldEhUTUxCeURhdGEiLCJrZXkiLCJjaGlsZCIsIm9iaiIsImlkIiwia2V5SW5kZXgiLCJkb21DYWNoZSIsInB1c2giLCJnZXRMaW5lU3RyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiczAiLCJzMSIsImdldERvbUJ5RGF0YSIsInVuZGVmaW5lZCIsImlubmVySFRNTCIsImxpbmUiLCJnZXRBdHRyaWJ1dGUiLCJkb21zIiwicXVlcnlTZWxlY3RvckFsbCIsIiQiLCJkb20iLCJuIiwiam9pbiIsImdldERhdGFCeUxpbmUiLCJnZXREb21CeUxKRSIsImkiLCJsZW5ndGgiLCJzZWwiLCJ2YWwiLCJmaXJzdENoaWxkIiwiYXJyIiwiZG9tT2JqIiwiY2hpbGROb2RlcyIsImZvckVhY2giLCJpdGVtIiwibm9kZVR5cGUiLCJ0cmltIiwidiIsImsiLCJldmVudHMiLCJjb2xzIiwiY2xhc3NOYW1lIiwiX2dldERhdGFCeUxpbmUzIiwiX2dldERhdGFCeUxpbmU0IiwiX3NsaWNlZFRvQXJyYXkiLCJpbmRleE9mIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwidGFyZ2V0IiwiZXZlbnQiLCJOdW1iZXIiLCJyZXBsYWNlIiwicHJvdG90eXBlIiwibGluZVN0cmluZyIsImZuIiwiY2hhbmdlIiwianNvbiIsImFkZCIsInRoZU5ldyIsImFwcGVuZENoaWxkIiwicmVtb3ZlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImdldEVsZW1lbnRCeUlkIiwib25jaGFuZ2UiLCJ0YWdOYW1lIiwib25jbGljayIsImFyZ3VtZW50cyIsInF1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LCJmaWxlIjoibGliL2pzb24tZWRpdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihnbG9iYWwsIGZhY3RvcnkpIHtcclxuICAgIC8vIFVNRCDliqDovb3mlrnmoYhcclxuICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKGZhY3RvcnkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGdsb2JhbC5Kc29uRWRpdCA9IGZhY3RvcnkoKTtcclxufSkod2luZG93LCBmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgbGV0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcclxuICAgIC8vIOexu+Wei+WIpOaWrVxyXG4gICAgZnVuY3Rpb24gZ2V0VmFsdWVUeXBlKHZhbHVlKSB7XHJcbiAgICAgICAgbGV0IHR5cGUgPSB0b1N0cmluZy5jYWxsKHZhbHVlKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiW29iamVjdCBvYmplY3RdXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvYmplY3RcIjtcclxuICAgICAgICAgICAgY2FzZSBcIltvYmplY3QgYXJyYXldXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xyXG4gICAgICAgICAgICBjYXNlIFwiW29iamVjdCBudWxsXVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiO1xyXG4gICAgICAgICAgICBjYXNlIFwiW29iamVjdCBzdHJpbmddXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcclxuICAgICAgICAgICAgY2FzZSBcIltvYmplY3QgbnVtYmVyXVwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XHJcbiAgICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IGJvb2xlYW5dXCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55Sf5oiQ5ZSv5LiA55qE5pWw5a2XXHJcbiAgICBsZXQga2V5SW5kZXggPSAxMDtcclxuICAgIC8vIOayoeS4gOihjOeahGh0bWznu5PmnoRcclxuICAgIGxldCBsaW5lU3RyaW5nID0gYDxkaXYgY2xhc3M9XCJsamUtbGluZSB7I2lzUm9vdH1cIiBrZXk9XCJ7I2lkfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWNvbHMgdHlwZS17I3R5cGV9XCIgbGpleyNpZH09XCJjb2xzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWNvbCBrZXlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWlwdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBsamV7I2lkfT1cImtleVwiIHsja2V5RGlzfSB2YWx1ZT1cInsja2V5fVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsamUtY29sIGljb24gaXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWlzXCI+OjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWNvbCBzZWxlY3RcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLXNlbGVjdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNlbGVjdC1jXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGxqZXsjaWR9PVwic2VsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInN0cmluZ1wiIHsjc3RyaW5nVHlwZX0+c3RyaW5nPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm51bWJlclwiIHsjbnVtYmVyVHlwZX0+bnVtYmVyPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9iamVjdFwiIHsjb2JqZWN0VHlwZX0+b2JqZWN0PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImFycmF5XCIgeyNhcnJheVR5cGV9PmFycmF5PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm51bGxcIiB7I251bGxUeXBlfT5udWxsPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInRydWVcIiB7I3RydWVUeXBlfT50cnVlPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImZhbHNlXCIgeyNmYWxzZVR5cGV9PmZhbHNlPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWNvbCBmdWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxqZS1pcHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbGpleyNpZH09XCJ2YWxcIiB2YWx1ZT1cInsjdmFsdWV9XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxqZS1jb2wgaWNvbiBhZGRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWFkZFwiIGxqZS1jbGljaz1cImFkZFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGplLWNvbCBpY29uIHJlbW92ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsamUtcmVtb3ZlXCIgbGplLWNsaWNrPVwicmVtb3ZlXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsamUtY2hpbGQgeyNpc0tleX1cIiBsamV7I2lkfT1cImNoaWxkXCI+eyNjaGlsZH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gLnJlcGxhY2UoLz5cXHMrPC9nLCBcIj48XCIpO1xyXG4gICAgXHJcbiAgICAvLyDmjInnhafmlbDmja7nlJ/miJDkuIDooYzmlbDmja5cclxuICAgIGZ1bmN0aW9uIGdldExpbmVTdHIodHlwZSwgdmFsdWUsIGtleSwgY2hpbGQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInh4eHg+Pj4+XCIsIHR5cGUsIHZhbHVlLCBrZXkpO1xyXG4gICAgICAgIGxldCBvYmogPSB7XHJcbiAgICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICAgIGlkOiBrZXlJbmRleCsrXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoa2V5ID09IFwiI1wiKSB7XHJcbiAgICAgICAgICAgIG9iai5pc1Jvb3QgPSBcInRoZS1yb290XCI7XHJcbiAgICAgICAgICAgIG9iai5rZXkgPSBcInJvb3RcIjtcclxuICAgICAgICAgICAgb2JqLmtleURpcyA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgICB9IGVsc2UgaWYgKGtleSkge1xyXG4gICAgICAgICAgICBvYmoua2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2JqW3R5cGUgKyBcIlR5cGVcIl0gPSBcInNlbGVjdGVkXCI7XHJcbiAgICAgICAgb2JqLmNoaWxkID0gY2hpbGQ7XHJcblxyXG4gICAgICAgIGlmIChbXCJudW1iZXJcIiwgXCJzdHJpbmdcIl0uaW5kZXhPZih0eXBlKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIG9iai52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICBvYmouaXNLZXkgPSBcInRoZS1rZXlcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsaW5lU3RyaW5nLnJlcGxhY2UoL1xce1xcIyhcXHcrKVxcfS9nLCBmdW5jdGlvbihzMCwgczEpIHtcclxuICAgICAgICAgICAgbGV0IHZhbCA9IG9ialtzMV07XHJcbiAgICAgICAgICAgIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWw7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5bCG5pWw5o2u6L2s5o2i5Li6VUnnlYzpnaLvvIjpgJLlvZLvvIlcclxuICAgIGZ1bmN0aW9uIGdldEhUTUxCeURhdGEodmFsdWUsIGtleSkge1xyXG4gICAgICAgIGxldCB0eXBlID0gZ2V0VmFsdWVUeXBlKHZhbHVlKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0eXBlLCB2YWx1ZSk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgbiBpbiB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobiwgdmFsdWVbbl0pO1xyXG4gICAgICAgICAgICAgICAgY2hpbGQucHVzaChnZXRIVE1MQnlEYXRhKHZhbHVlW25dLCBuKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY2hpbGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0TGluZVN0cih0eXBlLCB2YWx1ZSwga2V5LCBjaGlsZC5qb2luKFwiXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJhcnJheVwiKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5wdXNoKGdldEhUTUxCeURhdGEodmFsdWVbaV0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZ2V0TGluZVN0cih0eXBlLCB2YWx1ZSwga2V5LCBjaGlsZC5qb2luKFwiXCIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBnZXRMaW5lU3RyKHR5cGUsIHZhbHVlLCBrZXksIFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOiOt+WPluS4gOihjOeahGRvbVxyXG4gICAgbGV0IGRvbUNhY2hlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGZ1bmN0aW9uIGdldERvbUJ5RGF0YSh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgZG9tQ2FjaGUuaW5uZXJIVE1MID0gZ2V0SFRNTEJ5RGF0YSh2YWx1ZSwga2V5KTtcclxuICAgICAgICByZXR1cm4gZG9tQ2FjaGUuZmlyc3RDaGlsZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bnmoTlrprnmoRkb23lvJXnlKhcclxuICAgIGZ1bmN0aW9uIGdldERvbUJ5TEpFKGxpbmUpIHtcclxuICAgICAgICBsZXQgaWQgPSBcImxqZVwiICsgbGluZS5nZXRBdHRyaWJ1dGUoXCJrZXlcIik7XHJcbiAgICAgICAgbGV0IGRvbXMgPSBsaW5lLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbXCIgKyBpZCArIFwiXVwiKTtcclxuICAgICAgICBsZXQgZG9tT2JqID0ge1xyXG4gICAgICAgICAgICAkOiBsaW5lXHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvbXMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgbGV0IGRvbSA9IGRvbXNbaV07XHJcbiAgICAgICAgICAgIGxldCBrZXkgPSBkb20uZ2V0QXR0cmlidXRlKGlkKTtcclxuICAgICAgICAgICAgaWYgKGtleSkge1xyXG4gICAgICAgICAgICAgICAgZG9tT2JqW2tleV0gPSBkb207XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRvbU9iajtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXREYXRhQnlMaW5lKGxpbmUpIHtcclxuICAgICAgICBsZXQgJCA9IGdldERvbUJ5TEpFKGxpbmUpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCQpO1xyXG4gICAgICAgIGxldCB0eXBlID0gJC5zZWwudmFsdWU7XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkLnZhbCwgMSlcclxuICAgICAgICAgICAgbGV0IHZhbCA9IHt9O1xyXG4gICAgICAgICAgICAkLmNoaWxkLmNoaWxkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5ub2RlVHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IFt2LCBrXSA9IGdldERhdGFCeUxpbmUoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ6enp6elwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsW2tdID0gdjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8g6ZyA6KaB5aSE55CG6YeN5aSN5a2X56ym5LiyXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gW3ZhbCwgJC5rZXkudmFsdWUudHJpbSgpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJhcnJheVwiKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQudmFsLCAyKVxyXG4gICAgICAgICAgICBsZXQgYXJyID0gW107XHJcbiAgICAgICAgICAgICQuY2hpbGQuY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLm5vZGVUeXBlID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgW3ZdID0gZ2V0RGF0YUJ5TGluZShpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbYXJyLCAkLmtleS52YWx1ZS50cmltKCldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJudWxsXCIpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJC52YWwsIDMpXHJcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCwgJC5rZXkudmFsdWUudHJpbSgpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkLnZhbCwgNClcclxuICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgJC5rZXkudmFsdWUudHJpbSgpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQudmFsLCA1KVxyXG4gICAgICAgICAgICByZXR1cm4gW3RydWUsICQua2V5LnZhbHVlLnRyaW0oKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZSA9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQsIDYpXHJcbiAgICAgICAgICAgIHJldHVybiBbJC52YWwudmFsdWUudHJpbSgpLCAkLmtleS52YWx1ZS50cmltKCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCQudmFsLCA3KVxyXG4gICAgICAgICAgICByZXR1cm4gW051bWJlcigkLnZhbC52YWx1ZS5yZXBsYWNlKC9cXFcrL2csIFwiXCIpKSB8fCAwLCAkLmtleS52YWx1ZS50cmltKCldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgXCJcIl07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGV2ZW50cyA9IHtcclxuICAgICAgICAvLyBzZWxlY3QgY2hhbmdlXHJcbiAgICAgICAgY2hhbmdlKGxpbmUsIHR5cGUpIHtcclxuICAgICAgICAgICAgbGV0ICQgPSBnZXREb21CeUxKRShsaW5lKTtcclxuICAgICAgICAgICAgJC5jb2xzLmNsYXNzTmFtZSA9IFwibGplLWNvbHMgdHlwZS1cIiArIHR5cGU7XHJcbiAgICAgICAgICAgICQuY2hpbGQuY2xhc3NOYW1lID0gXCJsamUtY2hpbGRcIiArICh0eXBlID09IFwib2JqZWN0XCIgPyBcIiB0aGUta2V5XCIgOiBcIlwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgJC52YWwudmFsdWUgPSAkLnZhbC52YWx1ZS5yZXBsYWNlKC9cXEQvZywgXCJcIikgfHwgMDtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoW1wib2JqZWN0XCIsIFwiYXJyYXlcIl0uaW5kZXhPZih0eXBlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICQuY2hpbGQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gYWRkIOaMiemSrlxyXG4gICAgICAgIGFkZChsaW5lKSB7XHJcbiAgICAgICAgICAgIGxldCAkID0gZ2V0RG9tQnlMSkUobGluZSk7XHJcbiAgICAgICAgICAgIGxldCB0aGVOZXcgPSBnZXREb21CeURhdGEoXCJcIik7XHJcbiAgICAgICAgICAgICQuY2hpbGQuYXBwZW5kQ2hpbGQodGhlTmV3KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIOenu+mZpOW9k+WJjeihjFxyXG4gICAgICAgIHJlbW92ZShsaW5lKSB7XHJcbiAgICAgICAgICAgIGxpbmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsaW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNsYXNzIEpzb25FZGl0IHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihpZCkge1xyXG4gICAgICAgICAgICB0aGlzLiQgPSB0eXBlb2YgaWQgPT0gXCJzdHJpbmdcIiA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSA6IGlkO1xyXG4gICAgICAgICAgICB0aGlzLiQub25jaGFuZ2UgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IFwic2VsZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IHRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudHMuY2hhbmdlKHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUsIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLiQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgbGV0IGZuID0gZXZlbnRzW3RhcmdldC5nZXRBdHRyaWJ1dGUoXCJsamUtY2xpY2tcIildO1xyXG4gICAgICAgICAgICAgICAgZm4gJiYgZm4odGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE9cclxuICAgICAgICAgICAgLy8g5a+5bnVtYmVy57G75Z6L55qE6L6T5YWl5YGa5o6n5Yi2XHJcbiAgICAgICAgICAgIC8vIHRoaXMuJC5vbmtleWRvd24gPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWwhuaVsOaNruS8oOafk1VJXHJcbiAgICAgICAgcmVuZGVyQnlEYXRhKGpzb24gPSB7fSkge1xyXG4gICAgICAgICAgICB0aGlzLiQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJsb2N1cy1qc29uLWVkaXRcIj4nICsgZ2V0SFRNTEJ5RGF0YShqc29uLCBcIiNcIikgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgICB0aGlzLmtleSA9IGtleUluZGV4IC0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOiOt+WPllVJ57yW6L6R5ZCO55qE5pWw5o2uXHJcbiAgICAgICAgZ2V0RGF0YSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldERhdGFCeUxpbmUodGhpcy4kLnF1ZXJ5U2VsZWN0b3IoJ1trZXk9XCInICsgdGhpcy5rZXkgKyAnXCJdJykpWzBdO1xyXG4gICAgICAgICAgICAvLyBsZXQgJCA9IGdldERvbUJ5TEpFKHRoaXMuJC5xdWVyeVNlbGVjdG9yKFwiLmxqZS1saW5lID4gLmxqZS1jb2xzXCIpKVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gSnNvbkVkaXQ7XHJcbn0pO1xyXG4iXX0=
